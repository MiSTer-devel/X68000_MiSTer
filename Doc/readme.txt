FPGA版X68k互換機readme:
本RTLはDE0-CV(TERASIC社)のFPGAを書き換えて
X68000相当の機能を持たせる物です。

本RTLに関しては、フリーソフトウェアです。
・MC68000 MPUのIP : TG68はTobias Gubenerさんに著作権があります。
・ディスクエミュレータに使用しているフォントは東雲フォントがオリジナルです。

その他のRTLに関しては私、プーにあります。
このRTLに含まれるファイルに関しては一切無保証です。2次的被害を含む一切の責任は
負いません。

動作異常等に関しては、ブログ
http://fpga8801.seesaa.net/
内のメッセージやコメントにて連絡をお願いいたします。

使用方法:
本RTLはAltera社の開発環境 QuartusII web editionにて主に開発されており、
本配布もQuartusIIのarchive機能にてパッケージ化されております。
本RTLをProject→Restore archived projectにて展開を行い
(このファイルが開けている時点で完了していると思いますが)
コンパイルを行いますが、ライセンス等の関係でコンパイルに必要なファイルが
いくつか不足しております。
・BIOS/CGROM.hex
フォントデータです。実機から吸い出すか、Windows版エミュレータで作成される
CGROM.BIN またはCGROM.TMPをintel hexに変換してください。
64kBを超えます(x86で言うところのセグメント越え)ので対応した変換ソフトで変換してください。

上記の準備が出来たらStart Compilationにてコンパイルを行ってください。
コンパイル完了後、FPGA初期化用FlashにIPLROMと上で用意したCGROMを書き込む
準備が必要になります。
QuartusIIのFile→Convert Programming File
から「Open Vonversion Setup Data...」をクリックし、
X68k_DE0CV.cof
を選択してください。更に、Advancedをクリックし、Disable EPCS ID checkに
チェックを入れてください。Advanced optionsをOKで終了し、「Generate」を
クリックすると、X68k_DE0CV.pofファイルが生成されますのでこれを
Active SerialモードでDE0-CVボードに書き込みを行ってください。

尚、スイッチに関しては
・主電源スイッチ…本体の電源スイッチです。
・IPLリセットスイッチ…プッシュスイッチの一番左(小さい)
・電源スイッチ(前面)…プッシュスイッチの大きいものの一番右
・NMIスイッチ…プッシュスイッチの大きいものの右から2番目
10連スライドスイッチの一部にデバグ用機能が設定されています。
右から
・1番目:定期的(数秒)間隔でリセット
・3番目:CPU PAUSE
です。

SDカードはSASI HDDに見えるようになっています。SDSC(SDHCやSDXCではない
標準容量)のMicroSDカードを使用してください。
SDカードはファイルシステムではなくディスクとして使用しますので内容は初期化され、
他のシステムからのファイル操作等はできなくなりますので注意してください。
HDDとして使用しますので動作中の抜き差しはできません。主電源または電源が
OFFの状態で抜き差ししてください。

補助記憶としてはFDDを使用します。
2015年現在入手可能なドライブとしては3.5"の1.44MB用(AT互換機用)が
唯一ではないかと思いますのでこのドライブを接続できるようになっております。
X68000では本体内蔵は2ドライブですので2ドライブ接続できるようになっており、
接続には本体からの信号をAT互換機用FDDケーブル
(2ドライブ用のコネクタが3個付いており、一部が捻られた34芯ケーブル)
に変換して接続することになります。
接続に関しては、同梱の
pin-assign.xls
を参照ください。PC-8801版と同じ結線ですのでそのまま使用できます。
メディアに関しては2HDメディアを使用します。
FDDがAT互換機用ですのでX68000で初期化したFDDは読み込みできないと思います。
(X68000:360rpm、AT:300rpm)
360rpmのFDD(PC-98用等)を接続すれば読み込みできるかもしれません。
5" 2HD FDDを接続すれば、5"メディアがそのまま読み書きできるかもしれません。
(AT用5" FDDは360rpmです。)

FDDへのデータ書き込みは、Virtual Floppy Image Converterを用いて
XDF→D88変換し、DITTを用いて3.5" 2HDに書き込みを行い、正常に
動作することを確認しました。

SDカードによるディスクエミュレーション版に関しては、付属のエミュレータ
説明、「diskemu.txt」を参照してください。
本機でのメイン画面・ディスクエミュレーション画面の切り替えはスライドスイッチ
SW1に割り当てられています。
